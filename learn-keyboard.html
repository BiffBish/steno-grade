<!DOCTYPE html>
<html lang="en">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta charset="utf-8" />
        <title>Learn the Steno Keyboard</title>
        <link href="base.css" rel="stylesheet" type="text/css" />
        <script src="scripts/utils/theme.mjs" type="module"></script>
        <link href="style.less" rel="stylesheet/less" type="text/css" />
        <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script> -->

        <script src="scripts/libs/less.js"></script>
        <script src="scripts/libs/chart.js"></script>
        <script src="scripts/libs/chartjs-plugin-datalabels.js"></script>
        <script src="scripts/libs/jquery-3.6.0.min.js"></script>
        <link rel="stylesheet" type="text/css" href="font-roboto.css" />
        <link rel="stylesheet" type="text/css" href="font-roboto.css" />
    </head>
    <body>
        <div class="wrapper">
            <div id="form">
                <h1>Learn the Steno Keyboard</h1>
                <p style="text-align: center">
                    <a href="raw-steno-instructions.html"
                        >How to get raw steno output</a
                    >
                </p>
                <a href="index.html">
                    <div class="clickable-form-section center" id="word-drill">
                        <h2>Go back</h2>
                    </div>
                </a>
                <div class="form-section">
                    <div class="caption">
                        Pick a lesson and hint settings
                    </div>
                    <br />

                    <div name="hints" class="radio-buttons--row">
                        <label>
                            <input
                                id="hints"
                                type="radio"
                                name="hints"
                                value="true"
                                checked
                            />
                            Show hints
                        </label>
                        <label>
                            <input
                                id="hints"
                                type="radio"
                                name="hints"
                                value="fail-1"
                                checked
                            />Hint on fail</label
                        >
                        <label
                            ><input
                                id="hints"
                                type="radio"
                                name="hints"
                                value="fail-2"
                                checked
                            />Hint on failed twice</label
                        >
                        <label
                            ><input
                                id="hints"
                                type="radio"
                                name="hints"
                                value="fail-3"
                                checked
                            />Hint on failed three times</label
                        >
                        <label
                            ><input
                                id="hints"
                                type="radio"
                                name="hints"
                                value="false"
                                checked
                            />No hints</label
                        >
                    </div>
                <!-- </div> -->

                <!-- <div class="form-section"> -->
                    <form id="selectDrill" action="keyboard.html">
                        
                        <br />
                        <!-- <ul style="list-style-type: none"> -->
                        <select title="drill" name="drill"></select>
                        
                        <button class="form-section__submit-button"></button>
                    </form>
                </div>
            </div>
        </div>
        <script type="module">
            import { setTheme,loadSetting } from "./scripts/utils/util.mjs";
            // import {numberSentences} from "./scripts/number-sentences.mjs";
            // import {TypeJig,setExercise } from "./scripts/type-jig.mjs";
            // import {wordDrill} from "./scripts/word-drill.mjs";
            import { LearnKeyboard } from "./scripts/learn-keyboard.mjs";
            loadSetting("hints");

            // prepareInput("monkeytype-quote-length");
            setTheme();
            $(document).ready(function () {
                var form = document.getElementById("selectDrill");
                var drill = form.elements.drill;
                var order = Object.keys(LearnKeyboard);
                for (var i = 0; i < order.length; ++i) {
                    var option = document.createElement("option");
                    option.appendChild(document.createTextNode(order[i]));
                    drill.appendChild(option);
                }
                drill.focus();

                loadFormState(form);
                form.addEventListener("submit", function () {
                    saveFormState(form);
                });
            });
            //     populatePage();
            //     var leftFromPseudo = {
            //         C: "KR",
            //         D: "TK",
            //         B: "PW",
            //         L: "HR",
            //         F: "TP",
            //         M: "PH",
            //         N: "TPH",
            //         Q: "KW",
            //         Y: "KWR",
            //         J: "SKWR",
            //         V: "SR",
            //         G: "TKPW",
            //         X: "KP",
            //         Z: "STKPW",
            //     };
            //     var vowelFromPseudo = {
            //         AY: "AEU",
            //         OH: "OE",
            //         EE: "AOE",
            //         UU: "AOU",
            //         I: "EU",
            //         IE: "AOEU",
            //         AW: "AU",
            //         OW: "OU",
            //         OI: "OEU",
            //         EA: "AE",
            //         OA: "AO",
            //         OO: "AO",
            //     };
            //     var rightFromPseudo = {
            //         TH: "*T",
            //         CH: "FP",
            //         SH: "RB",
            //         RCH: "FRPB",
            //         N: "PB",
            //         NG: "PBG",
            //         NK: "PBG",
            //         M: "PL",
            //         K: "BG",
            //         SHN: "GS",
            //         KSHN: "BGS",
            //         J: "PBLG",
            //         RBGS: "RBGS",
            //     };
            //     var left_re =
            //         /C|L|G|Z|N|J|X|B|V|F|Y|Q|D|M|0|1|2|3|4|5|6|7|8|9|S|T|K|P|W|H|R/g;
            //     var vowel_re =
            //         /AY|OA|OO|AW|EA|EE|OH|UU|OI|IE|OW|I|0|1|2|3|4|5|6|7|8|9|A|O|E|U/g;
            //     var right_re =
            //         /RBGS|KSHN|SHN|RCH|CH|SH|NG|NK|TH|K|J|N|M|0|1|2|3|4|5|6|7|8|9|\*|F|R|P|B|L|G|T|S|D|Z/g;
            //     var separation_re =
            //         /([^AOEUI*-]*)([AO*EUI-][AO*EUIHYW-]*|)(.*)/;

            //     function fromPseudo(stroke) {
            //         match = separation_re.exec(stroke);
            //         var b = match[1],
            //             v = match[2],
            //             e = match[3];
            //         var left = b.replace(left_re, function (m) {
            //             return leftFromPseudo[m] || m;
            //         });
            //         var vowel = v.replace(vowel_re, function (m) {
            //             return vowelFromPseudo[m] || m;
            //         });
            //         var right = e.replace(right_re, function (m) {
            //             return rightFromPseudo[m] || m;
            //         });
            //         return (left + vowel + right).replace(/-$/, "");
            //     }

            //     if (document.location.search === "") {
            //
            //     } else {
            //         var fields = parseQueryString(document.location.search);
            //         var exercise = wordDrill(fields,LearnKeyboard);
            //         if (exercise) {
            //             var hints;
            //             // if (fields.hints) {
            //             //     var strokes = document.getElementById("strokes");

            //             //     hints = new StenoDisplay(strokes, [], true);
            //             //     hints.lookup = function (word) {
            //             //         if (word.split(" ").length > 1) {
            //             //             return "";
            //             //         }
            //             //         return word;
            //             //     };
            //             // }
            //             fields.menu = "learn-keyboard";
            //             fields.actualWords = {
            //                 unit: "strokes per minute",
            //                 u: "SPM",
            //             };

            //             displayOnly("lesson");
            //             var jig = setExercise(exercise.name, exercise, null, {
            //                 ...fields,
            //                 gradingRules: btoa(
            //                     JSON.stringify({
            //                         droppedWordMaxJump: 0,
            //                         addedWordMaxJump: 0,
            //                     })
            //                 ),
            //             });
            //             jig.match = function (a, b) {
            //                 return a == fromPseudo(b);
            //             };
            //         }
            //     }
            // });

            // function saveFormState(form) {
            //     save({
            //         drill: form.drill.value,
            //         hints: form.hints.checked,
            //         timeLimit: form?.timeLimit?.value,
            //     });
            // }

            // function loadFormState(form) {
            //     var loaded = load();
            //     if (loaded.drill) {
            //         form.drill.value = loaded.drill;
            //     }
            //     form.hints.checked = loaded.hints;
            //     if (loaded.timeLimit) {
            //         form.timeLimit ??= document.createElement("input");
            //         form.timeLimit.value = loaded.timeLimit;
            //     }
            // }

            // var LOCAL_STORAGE_KEY = "learn-plover-form";

            // function save(obj) {
            //     try {
            //         localStorage.setItem(
            //             LOCAL_STORAGE_KEY,
            //             JSON.stringify(obj)
            //         );
            //     } catch (e) {
            //         console.error(e);
            //     }
            // }

            // function load() {
            //     try {
            //         return (
            //             JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY)) ||
            //             {}
            //         );
            //     } catch (e) {
            //         console.error(e);
            //         return {};
            //     }
            // }

            // setTheme();
        </script>
    </body>
</html>
